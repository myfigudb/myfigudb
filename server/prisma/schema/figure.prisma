model Figure {
  id String @id @default(uuid()) @db.Uuid

  editorId String  @map("editor_id") @db.Uuid
  rangeId  String? @map("range_id") @db.Uuid

  name   String
  scale  String?
  height Int?
  unit   String?

  gtin13 String? @unique

  releaseDate DateTime?
  color       String?
  commentary  String?   @db.Text

  editor Editor @relation(fields: [editorId], references: [id])
  ranges Range? @relation(fields: [rangeId], references: [id])

  listings   FigureListing[]
  images     FigureMedia[]
  comments   FigureComment[]
  characters Character[]
  materials  Material[]
  tags       FigureTag[]

  @@map("figure")
}

model FigureComment {
  id String @id @default(uuid()) @db.Uuid

  userId   String @map("user_id") @db.Uuid
  figureId String @map("figure_id") @db.Uuid

  parentId String? @map("parent_id") @db.Uuid

  content String
  figures Figure[]
}

model FigureListing {
  id         String @id @default(uuid()) @db.Uuid
  resellerId String @map("reseller_id") @db.Uuid
  figureId   String @map("figure_id") @db.Uuid

  price    Float
  currency String? @default("EUR")
  ref      String?
  url      String

  imagesUrls  String[]
  description String?

  raw Json // Raw SCRAP object
  // status String

  reseller Reseller @relation(fields: [resellerId], references: [id])
  figure   Figure   @relation(fields: [figureId], references: [id])

  @@map("figure_listing")
}
